#!/bin/bash


openvz_setup ()
{
# bashsteps run_cmd
/opt/axsh/wakame-vdc/rpmbuild/helpers/edit-grub4vz.sh add
/opt/axsh/wakame-vdc/rpmbuild/helpers/edit-grub4vz.sh enable

}

lxc_setup ()
{
# bashsteps run_cmd
echo "none                    /cgroup                 cgroup  defaults        0 0" >> /etc/fstab
[[ -d /var/lib/lxc ]] || mkdir /var/lib/lxc
}


hypervisor_setup () 
{
    if [ -f /etc/wakame-vdc/convert_specs/load_balancer.yml ]; then
	sed -i "s,hypervisor: .*,hypervisor: 'dummy'," /etc/wakame-vdc/convert_specs/load_balancer.yml
    fi

    if declare -f ${hpervisor}_setup > /dev/null ; then
	${hypervisor}_setup
    fi
}


